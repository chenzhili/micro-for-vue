# mainFC 对于 平台端的 微服务 入口

# 20210601
webpack5 后 不需要指定 jsonpFunction 这个值

## 对于 微前端 需要解决的问题？？？？？？
1、如何在 主项目 和 子项目 之间的 路由 首位 完美的配合，需要 解决一个问题，就是 子项目中存在的 动态路由 在 主项目中 需要 知道 --- 需要 通信；如何调度？？？？？？

2、初始化 直接 在 浏览器的 url 上 输入 主项目 路由 + 子项目 路由的 时候 ，由于 没有 加载 子项目，导致 找不到路由，导致出错？？？？？？
如： /race(这是 主项目路由)/home(子项目路由)，这种 应该如何 处理

3、由于 在 高校平台 上的 多平台 是 新开窗口，不存在 缓存的 利用，所以应该处理 对于 子模块的 路由？？？？？？

4、在切换后 页面 并没有缓存？？？？？？,并且 切换后 出现 路由直接加载 /race/home 而不是 /race

## 微前端 子项目的 配置 点
1、需要注意 子项目在 主项目中 需要对应 设置 一个 基路由；
```js
  createWebHistory(window.__POWERED_BY_QIANKUN__ ? '/race' : '/')
```


# 20210602

## 微前端 解决的 问题
1、对于 主应用 和 子应用 之间的 导航守卫 分不清职责的问题？？？？？
逻辑上：主应用的 导航守卫 需要 处理，自应用 不需要 匹配 以及 路由
子应用的路由导航： matched 匹配不上不需要 做 任何操作；


# 20210603

## 对于 用 loadMicroApp 用于 手动加载 微应用的 操作，出现了 路由 bug；这种模式 最好就用于加载 组件的 模式
bug例子：主应用 /index => /race 加载 了 子应用 => 跳转到 子应用 的其他 页面，导致 跳转不了，永远重定向 到 默认 路由

解决：目前 只能 通过 官方 推荐的方式 执行 registerMicroApps 加载 子应用

## 基本 注入 方式 和 路由 配合 基本完成
未处理的：
1、对于 url 上 输入 的是 子应用 不是 默认路由的 页面，需要 通信 解决 跳转到 对应的页面


# 20210604

## 需要解决的问题：
1、对于 在 获取到 了 子应用的 路由地址 在 url 上进行 输入，需要定义 到对应的 页面；需要 相互 交互



# 20210607 整体 大的 步骤 操作
1、引入 乾坤，内部行为进行了 二次 封装，只需要 知道 如何 主应用 和 子应用 进行通信；
2、处理 注意，关注 路由 的 匹配 逻辑，去掉 一下匹配，在 导航守卫内 处理 对应的 没匹配 的 具体逻辑
```js
{
  path: "/:any(.*)*",
  component: () => import("@/views/404.vue")
}
```
3、只关注 主 子 应用 通信， 规定 所有的 订阅 事件  都需要 加入 type，不然 会被忽略；

4、关注 对于 url 发生变化 后的 特殊 处理


# 20200608
1、主应用 和 子应用的 生命周期的 走向 顺序，很重要
子mount -》 主 mount




